<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>דוח מודל ADAPT לארגונים</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .container {
            text-align: center;
        }
        .form-group {
            margin: 20px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .input-group {
            margin: 10px;
        }
        button {
            margin: 10px;
            padding: 8px 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        input {
            margin: 5px;
            padding: 5px;
            width: 150px;
        }
        #message {
            margin: 20px;
            padding: 10px;
            border-radius: 4px;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .calculator {
            background-color: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .result {
            font-size: 1.2em;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            background-color: #e9ecef;
            border-radius: 4px;
        }
        .cost-breakdown {
            text-align: right;
            margin: 15px 0;
            padding: 10px;
            background-color: #fff;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>דוח מודל ADAPT לארגונים</h1>
        
        <div class="form-group">
            <h3>עדכון ציונים</h3>
            <p>מלא את הציונים לכל ממד (1-5):</p>
            <div id="scores"></div>
            <button onclick="updateChart()">עדכן גרף</button>
        </div>

        <div class="calculator">
            <h3>מחשבון עלויות גיוס</h3>
            <div class="input-group">
                <label>מספר עובדים בארגון:</label>
                <input type="number" id="employeeCount" min="1" value="100">
            </div>
            <div class="input-group">
                <label>אחוז עזיבה שנתי:</label>
                <input type="number" id="turnoverRate" min="0" max="100" value="15">
            </div>
            <div class="input-group">
                <label>משכורת חודשית ממוצעת (₪):</label>
                <input type="number" id="avgSalary" min="0" value="15000">
            </div>
            <button onclick="calculateCosts()">חשב עלויות</button>
            
            <div id="costResult" class="result" style="display: none;">
                <div>סך עלויות גיוס שנתיות: <span id="totalCost">0</span> ₪</div>
                <div class="cost-breakdown">
                    <div>מספר עובדים שיש לגייס בשנה: <span id="replacementCount">0</span></div>
                    <div>עלות גיוס לעובד: <span id="costPerEmployee">0</span> ₪</div>
                    <div>אובדן פריון עבודה: <span id="productivityLoss">0</span> ₪</div>
                </div>
            </div>
        </div>

        <div id="chart"></div>
        <div id="message"></div>
    </div>

    <script>
        const dimensions = [
            "אסטרטגיה וכיוון",
            "יכולת הסתגלות",
            "תהליכים ומבנה",
            "תרבות ולמידה",
            "מדדים ותוצאות"
        ];

        const defaultScores = [0, 0, 0, 0, 0];

        // יצירת שדות הקלט
        const scoresDiv = document.getElementById('scores');
        dimensions.forEach((dim, i) => {
            const div = document.createElement('div');
            div.className = 'input-group';
            div.innerHTML = `
                <label>${dim}</label>
                <input type="number" id="score-${i}" min="1" max="5" step="1" value="0">
            `;
            scoresDiv.appendChild(div);
        });

        function createChart(scores) {
            const data = [{
                type: 'scatterpolar',
                r: [...scores, scores[0]],
                theta: [...dimensions, dimensions[0]],
                fill: 'toself'
            }];

            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 5]
                    }
                },
                showlegend: false,
                title: 'ניתוח מודל ADAPT'
            };

            Plotly.newPlot('chart', data, layout);
        }

        function updateChart() {
            const scores = [];
            for (let i = 0; i < dimensions.length; i++) {
                const score = parseInt(document.getElementById(`score-${i}`).value);
                if (isNaN(score) || score < 0 || score > 5) {
                    showMessage('נא להזין ציונים תקינים (1-5)', 'error');
                    return;
                }
                scores.push(score);
            }

            createChart(scores);
            showMessage('הגרף עודכן בהצלחה', 'success');
        }

        function calculateCosts() {
            const employeeCount = parseInt(document.getElementById('employeeCount').value);
            const turnoverRate = parseInt(document.getElementById('turnoverRate').value) / 100;
            const avgSalary = parseInt(document.getElementById('avgSalary').value);

            if (isNaN(employeeCount) || isNaN(turnoverRate) || isNaN(avgSalary)) {
                showMessage('נא להזין ערכים תקינים', 'error');
                return;
            }

            const replacementCount = Math.round(employeeCount * turnoverRate);
            const costPerEmployee = avgSalary * 3; // עלות גיוס מוערכת כ-3 משכורות
            const productivityLoss = avgSalary * 2 * replacementCount; // אובדן פריון של חודשיים לכל עובד
            const totalCost = (costPerEmployee * replacementCount) + productivityLoss;

            document.getElementById('replacementCount').textContent = replacementCount;
            document.getElementById('costPerEmployee').textContent = costPerEmployee.toLocaleString();
            document.getElementById('productivityLoss').textContent = productivityLoss.toLocaleString();
            document.getElementById('totalCost').textContent = totalCost.toLocaleString();
            document.getElementById('costResult').style.display = 'block';
        }

        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = type;
        }

        // יצירת גרף ראשוני
        createChart(defaultScores);
    </script>
</body>
</html> 